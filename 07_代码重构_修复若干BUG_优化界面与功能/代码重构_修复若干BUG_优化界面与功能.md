# 代码重构, 修复BUG与优化界面功能

## 代码重构

将服务端对于每条命令的处理拆分为若干个函数，将各个模块拆分，优化代码结构。

## 修复BUG与优化界面功能

在服务端添加了命令功能，原来监听是否有新连接的功能单独拆分出一个线程`new_sock`，主线程用于对管理员输入的命令做出相应，包括查看当前在线的人，以及当前的主题和退出。

最重要的功能是新增加的退出功能，之前服务端没有的退出功能，只能用"Ctrl + Z"结束进程，而这样此端口在下一次运行时就不能使用，只能用`sudo lsof -i:端口号`命令查出占用此端口号的进程然后用`kill`命令杀掉线程。

原先是只能由客户端向服务端主动提出退出后，服务端才会中断这个用户的连接，将其从列表中移除，而现在只需要加一小点修改，即管理员输入退出命令之后，向客户端发送退出命令，客户端收到退出命令后向服务端发送退出命令，将连接断开即可。

界面方面，加入了若干空行使文本显示更为美观，`lsu`和`lst`命令都可以显示数量。

代码见本文件夹下*server.py*和*client.py*。
